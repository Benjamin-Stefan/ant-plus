<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WebUSB with Specific Device Filters</title>
    </head>
    <body>
        <button id="connect-button">Connect to USB Device</button>

        <script>
            const connectButton = document.getElementById("connect-button");

            connectButton.addEventListener("click", async () => {
                try {
                    // Define filters for the specific USB devices (GarminStick2 and GarminStick3)
                    const filters = [
                        {
                            vendorId: 0x0fcf, // Vendor ID for both devices
                            productId: 0x1008, // Product ID for GarminStick2
                        },
                        {
                            vendorId: 0x0fcf, // Vendor ID for both devices
                            productId: 0x1009, // Product ID for GarminStick3
                        },
                    ];

                    // Request permission from the user to connect to a USB device with the specified filters
                    const device = await navigator.usb.requestDevice({ filters });

                    console.log("Selected device:", device);

                    // Open the device
                    await device.open();
                    console.log("Device opened:", device);

                    // Further communication with the device can be performed here
                } catch (error) {
                    console.error("Error connecting to USB device:", error);
                }
            });
        </script>
    </body>
</html>
